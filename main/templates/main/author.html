{% extends 'main/base.html' %}

{% block page_title%}にじさーち{% endblock %}

{% block content %}
<div class="container">
  <div class="mt-3 row justify-content-center">
    <div class="col-3 col-lg-2">
      <a href="https://twitter.com/{{ author.screen_name }}">
	<img class="img-thumbnail img-fluid rounded-circle" src="https://unavatar.io/twitter/{{ author.screen_name }}">
      </a>
    </div>
    <div class="w-100"></div>
    <div class="col-auto text-center text-secondary">@{{ author.screen_name }}</div>
  </div>
  <h2 class="h5 mt-5">登録イラスト {{ image_count }}枚</h2>
  <hr>
  <div class="mt-4 row g-0">
    {% for image in image_entry_list %}
      <div class="col-6 col-sm-4 col-md-3 col-lg-2 mb-0">
          <a href="{% url 'status' image.status.status_id %}"><img class="w-100 img-thumbnail" src="{{image.media_url}}:thumb"></a>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}

{% block script %}
<script
  src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
  integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI="
  crossorigin="anonymous"></script>
<script>
$('#search').submit(function(){
    const search_type = $('input:radio[name="search_type"]:checked').val();
    const query = $('#query').val();
    if (search_type == "tag") {
      location.href = "{% url 'search' %}?i2vtags=" + encodeURIComponent(query);
    } else if(search_type == "keyword"){
      location.href = "{% url 'search' %}?keyword=" + encodeURIComponent(query);
    } else if(search_type == "character"){
      location.href = "{% url 'search' %}?character=" + encodeURIComponent(query);
    } else {
      location.href = "/status/" + query;
    }
    return false;
})
</script>
{% endblock %}
