{% extends 'main/base.html' %}

{% block page_title%}にじさーち{% endblock %}

{% block content %}
<div class="container">
  <div class="mt-3 row justify-content-center">
    <div class="col-3 col-lg-2">
      <a href="https://twitter.com/{{ author.screen_name }}">
        <img class="img-thumbnail img-fluid rounded-circle" src="{{ author.profile_image_url }}">
      </a>
    </div>
    <div class="w-100"></div>
    <div class="col-auto text-center text-secondary">@{{ author.screen_name }}</div>
  </div>
  <h2 class="h5 mt-5">登録イラスト {{ image_count }}枚</h2>
  <select class="form-select mt-3" id="order">
    <option value="created_at"{% if order == "created_at" %} selected{% endif %}>投稿日時が新しい順</option>
    <option value="like"{% if order == "like" %} selected{% endif %}>いいね数が新しい順</option>
    <option value="id"{% if order == "id" %} selected{% endif %}>データベース登録が新しい順</option>
  </select>

  <div class="mt-4 row g-0">
    {% for image in image_entry_list %}
      <div class="col-6 col-sm-4 col-md-3 col-lg-2 mb-0">
          <a href="{% url 'status' image.status.status_id %}"><img class="w-100 img-thumbnail" src="{{image.media_url}}:thumb"></a>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}

{% block script %}
<script
  src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
  integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI="
  crossorigin="anonymous"></script>
<script>
$('#order').change(function() {
    var url = new URL(window.location);
    var search_params = url.searchParams;
    search_params.set('order', $('#order').val());
    var new_url = url.toString();
    window.location.replace(new_url);
});
</script>
{% endblock %}
